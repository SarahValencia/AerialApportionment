<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Function to overlay point locations on ACS data at the block group level, draw concentric polygons (buffers) around point locations at user specified radial distance, and apportion block group populations to each buffer based on the percentage of spatial overlap."><title>CensusBuffer — CensusBuffer • AerialApportionment</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="CensusBuffer — CensusBuffer"><meta property="og:description" content="Function to overlay point locations on ACS data at the block group level, draw concentric polygons (buffers) around point locations at user specified radial distance, and apportion block group populations to each buffer based on the percentage of spatial overlap."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">AerialApportionment</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>CensusBuffer</h1>
      
      <div class="d-none name"><code>CensusBuffer.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Function to overlay point locations on ACS data at the block group level, draw concentric polygons (buffers) around point locations at user specified radial distance, and apportion block group populations to each buffer based on the percentage of spatial overlap.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">CensusBuffer</span><span class="op">(</span></span>
<span>  <span class="va">buffer_vec</span>,</span>
<span>  <span class="va">census_dat_proj</span>,</span>
<span>  <span class="va">FacilityLocation_m</span>,</span>
<span>  runTract <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  tract_dat_proj <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  runCounty <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  county_dat_proj <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  variableNames <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  EmissionData <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>buffer_vec</dt>
<dd><p>A radial distance for a concentric buffer to be drawn around a point location in meters, or a vector of radial distances.</p></dd>


<dt>census_dat_proj</dt>
<dd><p>A spatial dataframe (sf object) of ACS data at the block group level, projected into a metric coordinate system. This should be the output of the PullCensusData function with a geography of "block group".</p></dd>


<dt>FacilityLocation_m</dt>
<dd><p>A spatial dataframe (sf object) of TRI facilities. This should be the output of the RSEISearch function, with returnLocation set to TRUE.</p></dd>


<dt>runTract</dt>
<dd><p>Logical. If true, adds tract level summaries for demographic variables for comparison. The user must supply ACS data summarized at the tract level. Defaults to False.</p></dd>


<dt>tract_dat_proj</dt>
<dd><p>A spatial dataframe (sf object) of ACS data at the tract level, projected into a metric coordinate system. This should be the output of the PullCensusData function with a geography of "tract".</p></dd>


<dt>runCounty</dt>
<dd><p>Logical. If true, adds county level summaries for demographic variables for comparison. The user must supply ACS data summarized at the county level. Defaults to False.</p></dd>


<dt>county_dat_proj</dt>
<dd><p>= A spatial dataframe (sf object) of ACS data at the countylevel, projected into a metric coordinate system. This should be the output of the PullCensusData function with a geography of "county".</p></dd>


<dt>variableNames</dt>
<dd><p>An optional vector of variable names, most likely the vector of named variable codes provided to the function PullCensusData.</p></dd>


<dt>EmissionData</dt>
<dd><p>An optional dataframe of emissions/RSEI score information if the user would like this merged into the demographic tabulation results. This should be the output of the RSEISearch function.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A wide format dataframe. If EmissionsData are included, these data are merged into the final output so that each row is a chemical-facility combination, and the columns include the summed emissions and associated scores as well as the demography in each buffer. If EmissionsData is not included, the output of this function is a wide format dataframe with a row for each facility and in the columns the tabulated ACS variables within each buffer distance of that facility location. If runTract or runCounty are true, it also includes the county or tract totals for each variable for comparison. Counts of the number of TRI facilities within the buffer/tract/county are also included.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function is specifically designed to apportion ACS population data at the block group level to nearby TRI facilities in order to calculate the demography within a certain distance of those facilties.  It relies on spatial functions in the sf package to take the outputs of the PullCensusData function (ACS data at the block group level, projected into a metric coordinate system) and the RSEISearch function (TRI Facility location data along with associated attributes, including emmissions) to determine the community attributes within a user specified distance of those facilities. Users can enter a vector of buffers (distance in meters) to do multiple calculations at once. For each radial distance provided, the data are intersected to determine the the proportion of each block groups that intersects the circular buffer. The population variables are then multiplied by that proportion to determine the number of people that are within the buffer, and this is summed for all the block groups that intersect each buffer to give a total population the buffer. This assumes that populations are distributed uniformly across block groups, which is incorrect but in the absence of finer scale distribution data provides a best estimate for the number of people that live within a given distance of each TRI facility.</p>
<p>This function is designed to be used with the output of the PullCensusData function, which pulls ACS data at desired geographical units, and the RSEISearch function, which produces a spatial dataframe of TRI reporting facilities as well as a dataframe of emissions data and RSEI scores for each chemical-facility combination.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Sarah Valencia, Environmental Defense Fund.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

